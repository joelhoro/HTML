<link rel="stylesheet" href="css/angular-chart.css">


<script src="lib/jquery-1.10.2.js"></script>
<script src="lib/underscore.js"></script>

<script src="lib/angular.min.js"></script>

<script type='text/javascript' src='lib/Chart/Chart.Core.js'></script>
<script type='text/javascript' src='lib/Chart/Chart.Bar.js'></script>
<script type='text/javascript' src='lib/Chart/Chart.Line.js'></script>
<script type='text/javascript' src='lib/angular-chart.js'></script>

<script type='text/javascript' src="lib/numeric-1.2.6.js"></script>

<script type="text/javascript" src="lib/ng-grid.debug.js"></script>
<script type="text/javascript" src="lib/ng-grid-layout.js"></script>

<!-- Project specific libs -->
<script src="js/utils.js"></script>
<script src="js/dateUtils.js"></script>

<script src="js/analytics.js"></script>

<script src="data/datawarehouse.js"></script>

<script src="js/voldata.js"></script>
<script src="js/volmarker.js"></script>
<script src="js/volsurfacectrl.js"></script>
<script src="js/volsurfacechart.js"></script>

<title>Chart test</title>
<html ng-app="volmarker">

  <div class=c ng-controller="LineCtrl">
  <button ng-click='update()'>CLICK</button>
  Active: {{activeUnderlier}}

      <vol-surface-chart volsurfaces='volsurfaces' underlier='activeUnderlier' listen=1 tooltip=1 type='' showdatesonaxis='true' >
      <b>BM estimate against dealer for {{activeUnderlier}}</b>
      </vol-surface-chart>
      <vol-surface-chart volsurfaces='volsurfaces' underlier='activeUnderlier' listen=1 tooltip=1 type='' showdatesonaxis='true' >
      <b>BM estimate against dealer for {{activeUnderlier}}</b>
      </vol-surface-chart>

  </div>
</html>

<script>


angular.module("volmarker")
.controller("LineCtrl", function ($scope,voldata) {
  var i = 0;
  $scope.underliers = ["SPX","SX5E","NKY", "SMI"];
  $scope.volsurfaces = $scope.underliers.toObject(u => voldata.getVol(u));

  $scope.update = function() {

    var size = Math.round(Math.random()*5)+1;
    var array = size => {
      var a = Array(size);
      for(var i = 0; i < size; i++) a[i] = 0;
      return a;
    }
    var underliers = $scope.underliers;
    i = (i+1)%underliers.length;
    $scope.activeUnderlier = underliers[i]
  }

  $scope.update();

});

</script>